From 23e0436fda4503b8463e031122ce8f71aaf5425f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Andreas=20M=C3=BCller?= <schnitzeltony@gmail.com>
Date: Mon, 5 Nov 2018 23:57:01 +0100
Subject: [PATCH] Make build of dialer optional
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

libphonenumber requires JAVA:

* Don't want meta-java as mandatory dependency
* Am not interested in phone parts by default

Upstream-Status: Pending

Signed-off-by: Andreas MÃ¼ller <schnitzeltony@gmail.com>
---
 CMakeLists.txt | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 1c5b4c2..558c5d3 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -25,6 +25,8 @@ include(ECMGenerateHeaders)
 include(GenerateExportHeader)
 include(FeatureSummary)
 
+option(BUILD_DIALER "Set this option to build dialer - requires libphonenumber (+JAVA)" OFF)
+
 find_package(Qt5 ${QT_MIN_VERSION} CONFIG REQUIRED Core Gui Widgets Qml Quick Test Sql)
 
 find_package(KF5 ${KF5_MIN_VERSION} REQUIRED COMPONENTS Plasma Service Declarative I18n KIO People)
@@ -54,7 +56,9 @@ install( DIRECTORY qtvirtualkeyboardplugin/ DESTINATION ${KDE_INSTALL_QMLDIR}/Qt
 add_subdirectory(bin)
 add_subdirectory(applets)
 add_subdirectory(containments)
-add_subdirectory(dialer)
+if(BUILD_DIALER)
+    add_subdirectory(dialer)
+endif(BUILD_DIALER)
 add_subdirectory(sounds)
 #add_subdirectory(touchscreentest)
 
-- 
2.21.0

